<div class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3">
  <div>
    <a href="{{ "" | relLangURL }}">
      <img src="/images/velociraptors-logo3.png"
           alt="Velociraptors Heidelberg Logo"
           class="logo max-h-[5rem] max-w-[5rem] md:max-h-[8.3rem] md:max-w-[8.3rem] object-scale-down object-left nozoom" />
    </a>
  </div>

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3"></nav>

    <nav class="hidden md:flex items-center gap-x-5 md:ml-6 h-12">
      {{ if .Site.Menus.main }}
        {{ range .Site.Menus.main }}
          {{ if or (not .Parent) (.HasChildren) }}
            {{ partial "header/header-option.html" . }}
          {{ end }}
        {{ end }}
      {{ end }}

      <div class="flex items-center gap-x-3">
        <div class="ml-[-2]">
          {{ partial "translations.html" . }}
        </div>
        <a href="https://www.strava.com/clubs/1194781" target="_blank" rel="noopener" title="Strava Club">
          <img src="/images/strava.png" alt="Strava" class="h-6 w-6 nozoom" />
        </a>
        <a href="https://chat.whatsapp.com/EzMhtXipCytEIUyzVBjZGx" target="_blank" rel="noopener" title="WhatsApp Gruppe">
          <img src="/images/whatsapp.png" alt="WhatsApp" class="h-6 w-6 nozoom" />
        </a>
        <a href="https://www.instagram.com/velociraptorsheidelberg/" target="_blank" rel="noopener" title="Instagram">
          <img src="/images/instagram.png" alt="Instagram" class="h-6 w-6 nozoom" />
        </a>
      </div>

      {{ if .Site.Params.enableSearch | default false }}
        <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600"
                title="{{ i18n "search.open_button_title" }}">
          {{ partial "icon.html" "search" }}
        </button>
      {{ end }}
    </nav>

    <div class="flex md:hidden items-center gap-x-5 md:ml-6 h-12">
      <div class="flex items-center gap-x-3">
        <div class="ml-[-2]">
          {{ partial "translations.html" . }}
        </div>
        <a href="https://www.strava.com/clubs/1194781" target="_blank" rel="noopener" title="Strava Club">
          <img src="/images/strava.png" alt="Strava" class="h-6 w-6 nozoom" />
        </a>
        <a href="https://chat.whatsapp.com/EzMhtXipCytEIUyzVBjZGx" target="_blank" rel="noopener" title="WhatsApp Gruppe">
          <img src="/images/whatsapp.png" alt="WhatsApp" class="h-6 w-6 nozoom" />
        </a>
        <a href="https://www.instagram.com/velociraptorsheidelberg/" target="_blank" rel="noopener" title="Instagram">
          <img src="/images/instagram.png" alt="Instagram" class="h-6 w-6 nozoom" />
        </a>
      </div>

      {{ if .Site.Params.enableSearch | default false }}
        <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600"
                title="{{ i18n "search.open_button_title" }}">
          {{ partial "icon.html" "search" }}
        </button>
      {{ end }}
    </div>
  </div>

  <div class="-my-2 md:hidden">
    <label id="menu-button" class="block">
      {{ if .Site.Menus.main }}
      <div class="cursor-pointer hover:text-primary-600">
        {{ partial "icon.html" "bars" }}
      </div>
      <div id="menu-wrapper" style="padding-top:5px;"
           class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm">
        <ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto list-none ltr:text-right rtl:text-left max-w-7xl">
          <li id="menu-close-button">
            <span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600">
              <!-- Icon entfernt -->
            </span>
          </li>
          {{ range .Site.Menus.main }}
            {{ if or (not .Parent) (.HasChildren) }}
              {{ partial "header/header-mobile-option.html" . }}
            {{ end }}
          {{ end }}
        </ul>

        {{ if .Site.Menus.subnavigation }}
        <hr>
        <ul class="flex mt-4 flex-col items-end w-full px-6 py-6 mx-auto list-none ltr:text-right rtl:text-left max-w-7xl">
          {{ range .Site.Menus.subnavigation }}
          <li class="mb-1">
            <a href="{{ .URL }}" {{ if or (strings.HasPrefix .URL "http:") (strings.HasPrefix .URL "https:") }}
               target="_blank" {{ end }} class="flex items-center">
              {{ if .Pre }}
              <span {{ if and .Pre .Name }} class="mr-3" {{ end }}>
                {{ partial "icon.html" .Pre }}
              </span>
              {{ end }}
              <p class="text-sm font-sm text-gray-500 hover:text-gray-900" title="{{ .Title }}">
                {{ .Name | markdownify }}
              </p>
            </a>
          </li>
          {{ end }}
        </ul>
        {{ end }}
      </div>
      {{ end }}
    </label>
  </div>
</div>

{{ if .Site.Params.highlightCurrentMenuArea }}
<script>
  (function () {
    var $mainmenu = document.querySelectorAll('.main-menu a');
    var path = window.location.pathname;
    $mainmenu.forEach(function (el) {
      if (el.getAttribute('href') === path) {
        var p = el.querySelector('p');
        if (p) p.classList.add('active');
      }
    });
  })();
</script>
{{ end }}
